<!DOCTYPE html>

<html lang="pt-br">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>OAK Tecnologia | Desafio</title>

    <!-- Tailwind CSS CLI -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- CSS Externo -->
    <link rel="stylesheet" href="css/style.css">

</head>

<body>

    <h1>Listagem de produtos</h1>

    <!-- Container da lista de produtos -->
    <div class="listaProdutos">

        

    </div>

    <!-- BotÃ£o que leva para tela de cadastro -->
    <div>

        <a href="#" onclick="testeCad()" class="bg-[green] rounded">Cadastrar</a>

    </div>

    <script src="js/script.js"></script>

    <script>
        
        // Carregar os produtos do localStorage ao iniciar
        window.onload = function () {
        mostrarProdutos();
        }

        function cadastrarProduto() {
        const nome = document.getElementById("nome").value;
        const preco = parseFloat(document.getElementById("preco").value);

        if (nome === "" || isNaN(preco)) {
            alert("Preencha todos os campos corretamente.");
            return;
        }

        const novoProduto = {
            nome: nome,
            preco: preco
        };

        // Recuperar a lista do localStorage (ou iniciar como array vazio)
        let lista = JSON.parse(localStorage.getItem("produtos")) || [];

        // Adicionar novo produto
        lista.push(novoProduto);

        // Salvar de volta no localStorage
        localStorage.setItem("produtos", JSON.stringify(lista));

        // Limpar campos
        document.getElementById("nome").value = "";
        document.getElementById("preco").value = "";

        // Atualizar lista na tela
        mostrarProdutos();
        }

        function mostrarProdutos() {
        const lista = JSON.parse(localStorage.getItem("produtos")) || [];
        const divLista = document.getElementById("listaProdutos");
        divLista.innerHTML = "";

        if (lista.length === 0) {
            divLista.innerHTML = "<p>Nenhum produto cadastrado.</p>";
            return;
        }

        lista.forEach((produto, index) => {
            divLista.innerHTML += `
            <div class="produto">
                <strong>${produto.nome}</strong> - R$ ${produto.preco.toFixed(2)}
            </div>
            `;
        });
        }

    </script>
    
</body>

</html>